<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.82.0"><meta name=description content="Tutorial website for FXGL"><meta name=author content="Mazela-Man"><link rel=icon href=/mazela-man-web/assets/favicon.ico type=image/ico><title>Introduction - Mazela-Man FXGL Tutorial</title><link href=/mazela-man-web/css/nucleus.css?1617197094 rel=stylesheet><link href=/mazela-man-web/css/fontawesome-all.min.css?1617197094 rel=stylesheet><link href=/mazela-man-web/css/hybrid.css?1617197094 rel=stylesheet><link href=/mazela-man-web/css/featherlight.min.css?1617197094 rel=stylesheet><link href=/mazela-man-web/css/perfect-scrollbar.min.css?1617197094 rel=stylesheet><link href=/mazela-man-web/css/auto-complete.css?1617197094 rel=stylesheet><link href=/mazela-man-web/css/atom-one-dark-reasonable.css?1617197094 rel=stylesheet><link href=/mazela-man-web/css/theme.css?1617197094 rel=stylesheet><link href=/mazela-man-web/css/hugo-theme.css?1617197094 rel=stylesheet><link href=/mazela-man-web/css/theme-red.css?1617197094 rel=stylesheet><script src=/mazela-man-web/js/jquery-3.3.1.min.js?1617197094></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/mazela-man-web/introduction/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=https://dykstrom.github.io/mazela-man-web/home/><img src=https://dykstrom.github.io/mazela-man-web/images/07/cherries-live.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/mazela-man-web/js/lunr.min.js?1617197094></script><script type=text/javascript src=/mazela-man-web/js/auto-complete.js?1617197094></script><script type=text/javascript>var baseurl="https://dykstrom.github.io/mazela-man-web/"</script><script type=text/javascript src=/mazela-man-web/js/search.js?1617197094></script></div><div class=highlightable><ul class=topics><li data-nav-id=/mazela-man-web/home/ title=Mazela-Man class=dd-item><a href=/mazela-man-web/home/>Mazela-Man</a></li><li data-nav-id=/mazela-man-web/introduction/ title=Introduction class="dd-item
parent
active"><a href=/mazela-man-web/introduction/>Introduction</a></li><li data-nav-id=/mazela-man-web/01_handling_input/ title="01. Handling input" class=dd-item><a href=/mazela-man-web/01_handling_input/>01. Handling input</a></li><li data-nav-id=/mazela-man-web/02_physics/ title="02. Physics" class=dd-item><a href=/mazela-man-web/02_physics/>02. Physics</a></li><li data-nav-id=/mazela-man-web/03_eating_and_keeping_score/ title="03. Eating and Keeping Score" class=dd-item><a href=/mazela-man-web/03_eating_and_keeping_score/>03. Eating and Keeping Score</a></li><li data-nav-id=/mazela-man-web/04_animation/ title="04. Animation" class=dd-item><a href=/mazela-man-web/04_animation/>04. Animation</a></li><li data-nav-id=/mazela-man-web/05_adding_enemies/ title="05. Adding Enemies" class=dd-item><a href=/mazela-man-web/05_adding_enemies/>05. Adding Enemies</a></li><li data-nav-id=/mazela-man-web/06_second_level/ title="06. A Second Level" class=dd-item><a href=/mazela-man-web/06_second_level/>06. A Second Level</a></li><li data-nav-id=/mazela-man-web/07_bonus_points/ title="07. Bonus Points" class=dd-item><a href=/mazela-man-web/07_bonus_points/>07. Bonus Points</a></li><li data-nav-id=/mazela-man-web/08_adding_sounds/ title="08. Adding Sound" class=dd-item><a href=/mazela-man-web/08_adding_sounds/>08. Adding Sound</a></li><li data-nav-id=/mazela-man-web/09_enable_main_menu/ title="09. Enable Main Menu" class=dd-item><a href=/mazela-man-web/09_enable_main_menu/>09. Enable Main Menu</a></li><li data-nav-id=/mazela-man-web/10_end_of_tutorial/ title="10. End of Tutorial" class=dd-item><a href=/mazela-man-web/10_end_of_tutorial/>10. End of Tutorial</a></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/mazela-man-web/>Home</a> > Introduction</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#basic-app>Basic App</a></li><li><a href=#basic-game>Basic Game</a></li><li><a href=#creating-a-level>Creating a Level</a><ul><li><a href=#folder-structure>Folder Structure</a></li><li><a href=#creating-the-level-file>Creating the Level File</a></li><li><a href=#editing-the-level-file>Editing the Level File</a></li></ul></li><li><a href=#entity-factory>Entity Factory</a></li><li><a href=#loading-the-level>Loading the Level</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Introduction</h1><h2 id=basic-app>Basic App</h2><p>We start with a very basic app, the &ldquo;Hello, World!&rdquo; of FXGL. If you run this app,
called <code>MazelaManApp</code>, you will be presented with a window similar to this.</p><p><img src=https://dykstrom.github.io/mazela-man-web/images/00/hello-fxgl.png alt="Hello, FXGL!"></p><p>The first thing that happens here is that our main method calls <code>GameApplication.launch</code>
to start the app. After that, FXGL is in control, and makes callbacks to initialize
and run our app. A look in the <code>GameApplication</code> class reveals several methods that
can be used to initialize input, physics and so on, but in this basic app we override
only two of them, <code>initSettings</code> to set some basic settings like the window size, and
<code>initUI</code> to create the single label that makes up our UI.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>initUI</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        Label label <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Label<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Hello, FXGL!&#34;</span><span style=color:#f92672>);</span>
        label<span style=color:#f92672>.</span><span style=color:#a6e22e>setFont</span><span style=color:#f92672>(</span>Font<span style=color:#f92672>.</span><span style=color:#a6e22e>font</span><span style=color:#f92672>(</span>20<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>));</span>
        FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>addUINode</span><span style=color:#f92672>(</span>label<span style=color:#f92672>,</span> 350<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>,</span> 290<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>The <code>Label</code> class, and the <code>Font</code> class used in <code>initUI</code> are the normal JavaFX <code>Label</code> and
<code>Font</code> classes used in any JavaFX application. Thus, having some knowledge of JavaFX will
help you when developing a game with FXGL, but it is not necessary.</p><p>The call to <code>FXGL.addUINode</code> will add the label at the specified location and make it visible.
The class <code>FXGL</code> is a facade that gives us access to much of FXGL, and we will see many calls
to the static methods in class <code>FXGL</code>.</p><h2 id=basic-game>Basic Game</h2><p>Now we will turn this app into a very basic game that displays the first level and the player
but not much more. We will create a level file using an external editor, and create new classes
and methods to set up the level in the game.</p><p>Some people have found it easier to start with the code from chapter 1 instead, given that the
structure of the game is already in place. So as an alternative to doing the work in this
introductory chapter, you can check out the code of chapter 1 while reading this text.</p><h2 id=creating-a-level>Creating a Level</h2><p>The first thing we want to do is to create a level that can be loaded into FXGL and
displayed in the main window. The level file will contain information on the images
(tiles) to display in the window, and some objects that we can control or interact with.
We will create and edit level files using the <a href=https://www.mapeditor.org>Tiled</a> application.</p><h3 id=folder-structure>Folder Structure</h3><p>FXGL uses the Convention over Configuration paradigm, and expects resource files to be
found in a certain folder structure. Let&rsquo;s start by creating that folder structure in the
resources folder:</p><p><img src=https://dykstrom.github.io/mazela-man-web/images/00/folder-structure.png alt="Folder Structure"></p><h3 id=creating-the-level-file>Creating the Level File</h3><p>An easy way to get started is to copy an &ldquo;empty&rdquo; level file from the main resources
folder to our newly created levels folder. Copy the level file from <a href=https://dykstrom.github.io/mazela-man-web/resources/empty-level.tmx>here</a>
and give it the name &ldquo;level1.tmx&rdquo;. You also need to copy the <a href=https://dykstrom.github.io/mazela-man-web/resources/tilemap.png>tilemap</a>
file to the levels folder. The tilemap file is a PNG file that contains all the images (tiles)
that we will use when designing the level. The tilemap file we are going to use looks like this.</p><p><img src=https://dykstrom.github.io/mazela-man-web/resources/tilemap.png alt="Tilemap File"></p><p>If you do not have access to the Tiled application, or do not want to edit the level file yourself,
you can simply copy <a href=https://dykstrom.github.io/mazela-man-web/01-chapter-1/src/main/resources/assets/levels/level1.tmx>the level file from the next chapter</a>
instead.</p><h3 id=editing-the-level-file>Editing the Level File</h3><p>Tiled is not going to be the focus of this tutorial, so editing levels in Tiled will be described
somewhat briefly. A level is divided into layers. Our level has two layers - a Tile Layer, and an
Object Layer. On the Tile Layer, we will put the tiles that define the looks of the level, and on
the Object Layer, we will put any objects that exist in the game. In FXGL, the objects are called
entities. In this step, we will have only one object or entity, and that is the Player.</p><p>You can design your level any way you like, but mine looks like this:</p><p><img src=https://dykstrom.github.io/mazela-man-web/images/00/level-design.png alt="Level Design"></p><p>Notice the small square near the bottom of the image. That is the Player object! If you click on
the Player object, the property editor on the left will display the properties of the Player object.</p><p><img src=https://dykstrom.github.io/mazela-man-web/images/00/player-object.png alt="Player Object"></p><p>Something important to notice about the Player object is the type, which must be &ldquo;Player&rdquo;. That is
how FXGL knows that it should spawn a Player entity when loading the level.</p><p>When you are happy with your level design, save it, and return to your IDE.</p><h2 id=entity-factory>Entity Factory</h2><p>Entities in FXGL are created by an entity factory. We must create an entity factory that has the
ability to create Player entities. Let&rsquo;s call our factory <code>MazelaManFactory</code> to fit with the name
of the app.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MazelaManFactory</span> <span style=color:#66d9ef>implements</span> EntityFactory <span style=color:#f92672>{</span>

    <span style=color:#a6e22e>@Spawns</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Player&#34;</span><span style=color:#f92672>)</span>
    <span style=color:#66d9ef>public</span> Entity <span style=color:#a6e22e>spawnPlayer</span><span style=color:#f92672>(</span>SpawnData data<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>entityBuilder</span><span style=color:#f92672>(</span>data<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>viewWithBBox</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;player.png&#34;</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>The <code>spawnPlayer</code> method of the factory is annotated with the <code>@Spawn</code> annotation. That is how FXGL knows
what type of entity to spawn. The value of the <code>@Spawn</code> annotation must match the type used in Tiled
exactly. In the method, we create an entity builder with some data we received, and we add a view
with a bounding box to it, and finally build the entity. The <code>SpawnData</code> class contains the position
of the entity to spawn, as well as some additional data like the width and height of the entity.
However, in our case, the width and height is taken from the view.</p><p>The view of an entity defines how it is represented on the screen. It can be an image as in this case,
but it can also be a geometrical figure like a circle. In fact, the view can be any JavaFX <code>Node</code>, so
we could make our view a <code>Label</code> or a <code>Button</code>. The bounding box of an entity defines the outer
perimeter of the entity, and is used when detecting collisions between entities.</p><p>Images that make up the visual part of an entity are called textures. We quickly realize that we
are now missing the &ldquo;player.png&rdquo; texture needed to make this work. Fortunately, we can copy
<a href=https://dykstrom.github.io/mazela-man-web/resources/player.png>player.png</a> to the textures folder.</p><p>While in the entity factory, let&rsquo;s also add another spawn method, to create a black background for
our game.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#a6e22e>@Spawns</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Background&#34;</span><span style=color:#f92672>)</span>
    <span style=color:#66d9ef>public</span> Entity <span style=color:#a6e22e>spawnBackground</span><span style=color:#f92672>(</span>SpawnData data<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>entityBuilder</span><span style=color:#f92672>(</span>data<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>view</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Rectangle<span style=color:#f92672>(</span>data<span style=color:#f92672>.&lt;</span>Integer<span style=color:#f92672>&gt;</span>get<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;width&#34;</span><span style=color:#f92672>),</span> data<span style=color:#f92672>.&lt;</span>Integer<span style=color:#f92672>&gt;</span>get<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;height&#34;</span><span style=color:#f92672>),</span> Color<span style=color:#f92672>.</span><span style=color:#a6e22e>BLACK</span><span style=color:#f92672>))</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>with</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> IrremovableComponent<span style=color:#f92672>())</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>zIndex</span><span style=color:#f92672>(-</span>100<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>This method spawns entities of type &ldquo;Background&rdquo; that have a view, but no bounding box. That is
because the background is not supposed to interact with the other entities. To place the background
firmly in the background, we give it a <code>zIndex</code> of -100 which will render it behind all other entities.</p><h2 id=loading-the-level>Loading the Level</h2><p>Let&rsquo;s now turn our attention to the main class, where we want to add code to actually load the level
and start our game. We remove the <code>initUI</code> method that we don&rsquo;t need at the moment, and instead add a
method to initialize the game.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>initGame</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>getGameWorld</span><span style=color:#f92672>().</span><span style=color:#a6e22e>addEntityFactory</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> MazelaManFactory<span style=color:#f92672>());</span>
        FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>spawn</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Background&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> SpawnData<span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> 0<span style=color:#f92672>).</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;width&#34;</span><span style=color:#f92672>,</span> WIDTH<span style=color:#f92672>).</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;height&#34;</span><span style=color:#f92672>,</span> HEIGHT<span style=color:#f92672>));</span>
        FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>setLevelFromMap</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;level1.tmx&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>First, we let FXGL know of our entity factory. Second, we manually spawn the background by calling
the <code>spawn</code> method of the FXGL facade. The arguments of the version of the <code>spawn</code> method we use are the
entity type, and the spawn data that is used to place the entity in the window. Finally, we load the
level into FXGL. The <code>setLevelFromMap</code> method will read the level file, render the tiles, and create
the entities defined as objects in the level file. It expects, as previously mentioned, the level
file to exist in a specific folder, namely &ldquo;resources/assets/levels&rdquo;.</p><p>If you run your application again, you will see something that looks like this.</p><p><img src=https://dykstrom.github.io/mazela-man-web/images/00/introduction-result.png alt=Result></p><p>If you instead get an error message similar to below, you probably need to run Maven to copy
the resources to the target folder. Note that you need to re-run Maven each time you have added
new assets to the chapter you are working on.</p><p><img src=https://dykstrom.github.io/mazela-man-web/images/00/resource-error.png alt="Resource Error"></p><p>You can run Maven in your IDE, or on the command line. If you run from the command line, make
sure that the correct Java version is first in your path. Running Maven successfully will
produce output similar to this:</p><pre><code>&gt; mvn compile
[INFO] Scanning for projects...

[... a lot of output ...]

[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary for mazela-man 0.1.0-SNAPSHOT:
[INFO]
[INFO] mazela-man ......................................... SUCCESS [  0.008 s]
[INFO] 00-introduction .................................... SUCCESS [  1.441 s]
[INFO] 01-chapter-1 ....................................... SUCCESS [  0.353 s]
[INFO] 02-chapter-2 ....................................... SUCCESS [  0.416 s]
[INFO] 03-chapter-3 ....................................... SUCCESS [  0.374 s]
[INFO] 04-chapter-4 ....................................... SUCCESS [  0.360 s]
[INFO] 05-chapter-5 ....................................... SUCCESS [  0.368 s]
[INFO] 06-chapter-6 ....................................... SUCCESS [  0.366 s]
[INFO] 07-chapter-7 ....................................... SUCCESS [  0.439 s]
[INFO] 08-chapter-8 ....................................... SUCCESS [  0.418 s]
[INFO] 09-chapter-9 ....................................... SUCCESS [  0.376 s]
[INFO] 10-chapter-10 ...................................... SUCCESS [  0.372 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  5.478 s
[INFO] Finished at: 2021-03-16T16:28:50+01:00
[INFO] ------------------------------------------------------------------------
</code></pre><p>This concludes the introduction of the tutorial. Now you can proceed to <a href=https://dykstrom.github.io/mazela-man-web/01_handling_input/>chapter 1</a>.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/mazela-man-web/home/ title=Mazela-Man><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/mazela-man-web/01_handling_input/ title="01. Handling input" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/mazela-man-web/js/clipboard.min.js?1617197094></script><script src=/mazela-man-web/js/perfect-scrollbar.min.js?1617197094></script><script src=/mazela-man-web/js/perfect-scrollbar.jquery.min.js?1617197094></script><script src=/mazela-man-web/js/jquery.sticky.js?1617197094></script><script src=/mazela-man-web/js/featherlight.min.js?1617197094></script><script src=/mazela-man-web/js/highlight.pack.js?1617197094></script><script>hljs.initHighlightingOnLoad()</script><script src=/mazela-man-web/js/modernizr.custom-3.6.0.js?1617197094></script><script src=/mazela-man-web/js/learn.js?1617197094></script><script src=/mazela-man-web/js/hugo-learn.js?1617197094></script><script src=/mazela-man-web/mermaid/mermaid.js?1617197094></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>