<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.82.0"><meta name=description content="Tutorial website for FXGL"><meta name=author content="Mazela-Man"><link rel=icon href=/mazela-man-web/assets/favicon.ico type=image/ico><title>04. Animation - Mazela-Man FXGL Tutorial</title><link href=/mazela-man-web/css/nucleus.css?1617196794 rel=stylesheet><link href=/mazela-man-web/css/fontawesome-all.min.css?1617196794 rel=stylesheet><link href=/mazela-man-web/css/hybrid.css?1617196794 rel=stylesheet><link href=/mazela-man-web/css/featherlight.min.css?1617196794 rel=stylesheet><link href=/mazela-man-web/css/perfect-scrollbar.min.css?1617196794 rel=stylesheet><link href=/mazela-man-web/css/auto-complete.css?1617196794 rel=stylesheet><link href=/mazela-man-web/css/atom-one-dark-reasonable.css?1617196794 rel=stylesheet><link href=/mazela-man-web/css/theme.css?1617196794 rel=stylesheet><link href=/mazela-man-web/css/hugo-theme.css?1617196794 rel=stylesheet><link href=/mazela-man-web/css/theme-red.css?1617196794 rel=stylesheet><script src=/mazela-man-web/js/jquery-3.3.1.min.js?1617196794></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/mazela-man-web/04_animation/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=https://dykstrom.github.io/mazela-man-web/home/><img src=https://dykstrom.github.io/mazela-man-web/images/07/cherries-live.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/mazela-man-web/js/lunr.min.js?1617196794></script><script type=text/javascript src=/mazela-man-web/js/auto-complete.js?1617196794></script><script type=text/javascript>var baseurl="https://dykstrom.github.io/mazela-man-web/"</script><script type=text/javascript src=/mazela-man-web/js/search.js?1617196794></script></div><div class=highlightable><ul class=topics><li data-nav-id=/mazela-man-web/home/ title=Mazela-Man class=dd-item><a href=/mazela-man-web/home/>Mazela-Man</a></li><li data-nav-id=/mazela-man-web/introduction/ title=Introduction class=dd-item><a href=/mazela-man-web/introduction/>Introduction</a></li><li data-nav-id=/mazela-man-web/01_handling_input/ title="01. Handling input" class=dd-item><a href=/mazela-man-web/01_handling_input/>01. Handling input</a></li><li data-nav-id=/mazela-man-web/02_physics/ title="02. Physics" class=dd-item><a href=/mazela-man-web/02_physics/>02. Physics</a></li><li data-nav-id=/mazela-man-web/03_eating_and_keeping_score/ title="03. Eating and Keeping Score" class=dd-item><a href=/mazela-man-web/03_eating_and_keeping_score/>03. Eating and Keeping Score</a></li><li data-nav-id=/mazela-man-web/04_animation/ title="04. Animation" class="dd-item
parent
active"><a href=/mazela-man-web/04_animation/>04. Animation</a></li><li data-nav-id=/mazela-man-web/05_adding_enemies/ title="05. Adding Enemies" class=dd-item><a href=/mazela-man-web/05_adding_enemies/>05. Adding Enemies</a></li><li data-nav-id=/mazela-man-web/06_second_level/ title="06. A Second Level" class=dd-item><a href=/mazela-man-web/06_second_level/>06. A Second Level</a></li><li data-nav-id=/mazela-man-web/07_bonus_points/ title="07. Bonus Points" class=dd-item><a href=/mazela-man-web/07_bonus_points/>07. Bonus Points</a></li><li data-nav-id=/mazela-man-web/08_adding_sounds/ title="08. Adding Sound" class=dd-item><a href=/mazela-man-web/08_adding_sounds/>08. Adding Sound</a></li><li data-nav-id=/mazela-man-web/09_enable_main_menu/ title="09. Enable Main Menu" class=dd-item><a href=/mazela-man-web/09_enable_main_menu/>09. Enable Main Menu</a></li><li data-nav-id=/mazela-man-web/10_end_of_tutorial/ title="10. End of Tutorial" class=dd-item><a href=/mazela-man-web/10_end_of_tutorial/>10. End of Tutorial</a></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/mazela-man-web/>Home</a> > 04. Animation</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#playercomponent>PlayerComponent</a></li><li><a href=#animatedtexture>AnimatedTexture</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>04. Animation</h1><p>We are now going to animate our player character when it moves around the maze. To keep the
animation code in one place, we begin by creating a custom component for the player.</p><h3 id=playercomponent>PlayerComponent</h3><p>Custom components in FXGL inherit from the class <code>Component</code>. Make sure to import the
<code>Component</code> class from FXGL, and not from AWT.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PlayerComponent</span> <span style=color:#66d9ef>extends</span> Component <span style=color:#f92672>{</span>
    <span style=color:#f92672>...</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>We add it to the player entity the same way as other components in the entity factory. Note
that we no longer add a view with a bounding box to the entity. We only add the bounding box.
That is because the <code>PlayerComponent</code> will take care of the view.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#a6e22e>@Spawns</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Player&#34;</span><span style=color:#f92672>)</span>
    <span style=color:#66d9ef>public</span> Entity <span style=color:#a6e22e>spawnPlayer</span><span style=color:#f92672>(</span>SpawnData data<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#f92672>...</span>
        <span style=color:#66d9ef>return</span> FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>entityBuilder</span><span style=color:#f92672>(</span>data<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>type</span><span style=color:#f92672>(</span>EntityType<span style=color:#f92672>.</span><span style=color:#a6e22e>PLAYER</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>bbox</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> HitBox<span style=color:#f92672>(</span>BoundingShape<span style=color:#f92672>.</span><span style=color:#a6e22e>box</span><span style=color:#f92672>(</span>20<span style=color:#f92672>,</span> 20<span style=color:#f92672>)))</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>with</span><span style=color:#f92672>(</span>physics<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>with</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> PlayerComponent<span style=color:#f92672>())</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>collidable</span><span style=color:#f92672>()</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>Before we can do any animation, we must create sprite sheets to base the animation on. Our
player character will be animated differently depending on the direction, so we need several
sprite sheets. These are the sprite sheets we will use:</p><p><img src=https://dykstrom.github.io/mazela-man-web/resources/player-left.png alt=Left></p><p><img src=https://dykstrom.github.io/mazela-man-web/resources/player-right.png alt=Right></p><p><img src=https://dykstrom.github.io/mazela-man-web/resources/player-up-down.png alt="Up and Down"></p><p>You can copy them from <a href=../../static/resources>here</a> to the textures folder.</p><h3 id=animatedtexture>AnimatedTexture</h3><p>An animated view in FXGL is provided by an <code>AnimatedTexture</code>. The <code>AnimatedTexture</code> performs
the animation by playing an <code>AnimationChannel</code> that provides the data for one animation
cycle. You can at any moment change the animation channel that is played by the animated
texture, and thereby change the animation.</p><p>For the player animation, we need one animated texture, and three animation channels, one
for each sprite sheet.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> AnimatedTexture texture<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> AnimationChannel left<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> AnimationChannel right<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> AnimationChannel upDown<span style=color:#f92672>;</span>
</code></pre></div><p>In the `PlayerComponent constructor we create these objects.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>        left <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnimationChannel<span style=color:#f92672>(</span>FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>image</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;player-left.png&#34;</span><span style=color:#f92672>),</span> Duration<span style=color:#f92672>.</span><span style=color:#a6e22e>seconds</span><span style=color:#f92672>(</span>0<span style=color:#f92672>.</span><span style=color:#a6e22e>5</span><span style=color:#f92672>),</span> 6<span style=color:#f92672>);</span>
        right <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnimationChannel<span style=color:#f92672>(</span>FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>image</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;player-right.png&#34;</span><span style=color:#f92672>),</span> Duration<span style=color:#f92672>.</span><span style=color:#a6e22e>seconds</span><span style=color:#f92672>(</span>0<span style=color:#f92672>.</span><span style=color:#a6e22e>5</span><span style=color:#f92672>),</span> 6<span style=color:#f92672>);</span>
        upDown <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnimationChannel<span style=color:#f92672>(</span>FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>image</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;player-up-down.png&#34;</span><span style=color:#f92672>),</span> Duration<span style=color:#f92672>.</span><span style=color:#a6e22e>seconds</span><span style=color:#f92672>(</span>0<span style=color:#f92672>.</span><span style=color:#a6e22e>5</span><span style=color:#f92672>),</span> 6<span style=color:#f92672>);</span>
        texture <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnimatedTexture<span style=color:#f92672>(</span>upDown<span style=color:#f92672>);</span>
</code></pre></div><p>Each animation channel is created with its sprite sheet image, a value that specifies the
duration of a single animation cycle, and the number of frames in an animation cycle. The
animation channel automatically splits the sprite sheet into frame images based on the
number of frames specified. So our sprite sheets will be split into six images each. There
are other constructors in the <code>AnimationChannel</code> class. You can for example specify the frame
images as a list of separate images instead of a sprite sheet. You can also specify the first
and last image to use, if you have a bigger sprite sheet, where not all images should be used.</p><p>The animated texture is created with its default animation channel. This channel will be
played if you later call the play method without specifying a new channel. The texture has
not yet been attached as a view to the entity. That is because the entity has not yet been
created. We attach the texture to the view when the <code>PlayerComponent</code> is later added to the
entity.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onAdded</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        entity<span style=color:#f92672>.</span><span style=color:#a6e22e>getViewComponent</span><span style=color:#f92672>().</span><span style=color:#a6e22e>addChild</span><span style=color:#f92672>(</span>texture<span style=color:#f92672>);</span>
        texture<span style=color:#f92672>.</span><span style=color:#a6e22e>loopAnimationChannel</span><span style=color:#f92672>(</span>upDown<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>This code gets the view component of the entity, and adds the animated texture as a child
to it. It also starts playing the <code>upDown</code> animation in a loop. If you want to play an
animation only once, there are play methods that you can use instead.</p><p>The <code>Component</code> class also has other callback methods that you can override. The method
<code>onRemoved</code> is called right before the component is removed from the entity, and the
method <code>onUpdate</code> is called each frame during game play</p><p>If you run the app now, you&rsquo;ll see that although the player is animated, the same animation
cycle is played all the time. We need to add some more code to change animation according to
direction. Let&rsquo;s add methods for changing direction to the <code>PlayerComponent</code>. The <code>left</code>
method looks like this.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>left</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>texture<span style=color:#f92672>.</span><span style=color:#a6e22e>getAnimationChannel</span><span style=color:#f92672>()</span> <span style=color:#f92672>!=</span> left<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            texture<span style=color:#f92672>.</span><span style=color:#a6e22e>loopAnimationChannel</span><span style=color:#f92672>(</span>left<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>If the animation channel is not already equal to <code>left</code>, we make it so. Why the <code>if</code> statement?
Can&rsquo;t we just always set it to <code>left</code> in the <code>left</code> method? No, because that would cause the
animation to restart every time we call this method. So if the user keeps pressing the <code>A</code> key,
there would be no animation, just the first frame over and over.</p><p>We can add the corresponding methods for the other directions.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>right</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>texture<span style=color:#f92672>.</span><span style=color:#a6e22e>getAnimationChannel</span><span style=color:#f92672>()</span> <span style=color:#f92672>!=</span> right<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            texture<span style=color:#f92672>.</span><span style=color:#a6e22e>loopAnimationChannel</span><span style=color:#f92672>(</span>right<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>up</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>texture<span style=color:#f92672>.</span><span style=color:#a6e22e>getAnimationChannel</span><span style=color:#f92672>()</span> <span style=color:#f92672>!=</span> upDown<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            texture<span style=color:#f92672>.</span><span style=color:#a6e22e>loopAnimationChannel</span><span style=color:#f92672>(</span>upDown<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>down</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>texture<span style=color:#f92672>.</span><span style=color:#a6e22e>getAnimationChannel</span><span style=color:#f92672>()</span> <span style=color:#f92672>!=</span> upDown<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            texture<span style=color:#f92672>.</span><span style=color:#a6e22e>loopAnimationChannel</span><span style=color:#f92672>(</span>upDown<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>Of course, nothing at all will happen if we don&rsquo;t call these new methods. We need to call
them from the input handlers. The input handler for the <code>A</code> key will now look like:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>        FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>onKey</span><span style=color:#f92672>(</span>KeyCode<span style=color:#f92672>.</span><span style=color:#a6e22e>A</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Move Left&#34;</span><span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
            getPlayer<span style=color:#f92672>().</span><span style=color:#a6e22e>getComponent</span><span style=color:#f92672>(</span>PhysicsComponent<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>).</span><span style=color:#a6e22e>setVelocityX</span><span style=color:#f92672>(-</span>SPEED<span style=color:#f92672>);</span>
            getPlayer<span style=color:#f92672>().</span><span style=color:#a6e22e>getComponent</span><span style=color:#f92672>(</span>PlayerComponent<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>).</span><span style=color:#a6e22e>left</span><span style=color:#f92672>();</span>
        <span style=color:#f92672>});</span>
</code></pre></div><p>We get the <code>PlayerComponent</code> from the player entity and call the <code>left</code> method.</p><p><img src=https://dykstrom.github.io/mazela-man-web/images/04/animated-player.png alt="Animated Player"></p><p>Now we are done! The animation works as expected. However, since we now have a
<code>PlayerComponent</code>, we can refactor our code and move more of the player related code into the
<code>PlayerComponent</code>. We already have methods called <code>left</code>, <code>right</code>, <code>up</code>, and <code>down</code> in the
<code>PlayerComponent</code>. Let&rsquo;s move the actual moving of the entity into these methods as well.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#66d9ef>private</span> PhysicsComponent physics<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>left</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        physics<span style=color:#f92672>.</span><span style=color:#a6e22e>setVelocityX</span><span style=color:#f92672>(-</span>SPEED<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>texture<span style=color:#f92672>.</span><span style=color:#a6e22e>getAnimationChannel</span><span style=color:#f92672>()</span> <span style=color:#f92672>!=</span> left<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            texture<span style=color:#f92672>.</span><span style=color:#a6e22e>loopAnimationChannel</span><span style=color:#f92672>(</span>left<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>right</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        physics<span style=color:#f92672>.</span><span style=color:#a6e22e>setVelocityX</span><span style=color:#f92672>(</span>SPEED<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>texture<span style=color:#f92672>.</span><span style=color:#a6e22e>getAnimationChannel</span><span style=color:#f92672>()</span> <span style=color:#f92672>!=</span> right<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            texture<span style=color:#f92672>.</span><span style=color:#a6e22e>loopAnimationChannel</span><span style=color:#f92672>(</span>right<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>up</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        physics<span style=color:#f92672>.</span><span style=color:#a6e22e>setVelocityY</span><span style=color:#f92672>(-</span>SPEED<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>texture<span style=color:#f92672>.</span><span style=color:#a6e22e>getAnimationChannel</span><span style=color:#f92672>()</span> <span style=color:#f92672>!=</span> upDown<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            texture<span style=color:#f92672>.</span><span style=color:#a6e22e>loopAnimationChannel</span><span style=color:#f92672>(</span>upDown<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>down</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        physics<span style=color:#f92672>.</span><span style=color:#a6e22e>setVelocityY</span><span style=color:#f92672>(</span>SPEED<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>texture<span style=color:#f92672>.</span><span style=color:#a6e22e>getAnimationChannel</span><span style=color:#f92672>()</span> <span style=color:#f92672>!=</span> upDown<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            texture<span style=color:#f92672>.</span><span style=color:#a6e22e>loopAnimationChannel</span><span style=color:#f92672>(</span>upDown<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>By default, the <code>PhysicsComponent</code> will be injected into the <code>PlayerComponent</code>, so it will be
available to us there. You can turn this feature off by overriding a method in <code>Component</code>
if you want to improve the speed of entity creation.</p><p>The refactoring will make the <code>initInput</code> method look better again.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>initInput</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>onKey</span><span style=color:#f92672>(</span>KeyCode<span style=color:#f92672>.</span><span style=color:#a6e22e>A</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Move Left&#34;</span><span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> getPlayer<span style=color:#f92672>().</span><span style=color:#a6e22e>getComponent</span><span style=color:#f92672>(</span>PlayerComponent<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>).</span><span style=color:#a6e22e>left</span><span style=color:#f92672>());</span>
        FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>onKey</span><span style=color:#f92672>(</span>KeyCode<span style=color:#f92672>.</span><span style=color:#a6e22e>D</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Move Right&#34;</span><span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> getPlayer<span style=color:#f92672>().</span><span style=color:#a6e22e>getComponent</span><span style=color:#f92672>(</span>PlayerComponent<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>).</span><span style=color:#a6e22e>right</span><span style=color:#f92672>());</span>
        FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>onKey</span><span style=color:#f92672>(</span>KeyCode<span style=color:#f92672>.</span><span style=color:#a6e22e>W</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Move Up&#34;</span><span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> getPlayer<span style=color:#f92672>().</span><span style=color:#a6e22e>getComponent</span><span style=color:#f92672>(</span>PlayerComponent<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>).</span><span style=color:#a6e22e>up</span><span style=color:#f92672>());</span>
        FXGL<span style=color:#f92672>.</span><span style=color:#a6e22e>onKey</span><span style=color:#f92672>(</span>KeyCode<span style=color:#f92672>.</span><span style=color:#a6e22e>S</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Move Down&#34;</span><span style=color:#f92672>,</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> getPlayer<span style=color:#f92672>().</span><span style=color:#a6e22e>getComponent</span><span style=color:#f92672>(</span>PlayerComponent<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>).</span><span style=color:#a6e22e>down</span><span style=color:#f92672>());</span>
    <span style=color:#f92672>}</span>
</code></pre></div><p>In the <a href=https://dykstrom.github.io/mazela-man-web/05_adding_enemies/>next chapter</a> we will add an enemy with simple AI.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/mazela-man-web/03_eating_and_keeping_score/ title="03. Eating and Keeping Score"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/mazela-man-web/05_adding_enemies/ title="05. Adding Enemies" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/mazela-man-web/js/clipboard.min.js?1617196794></script><script src=/mazela-man-web/js/perfect-scrollbar.min.js?1617196794></script><script src=/mazela-man-web/js/perfect-scrollbar.jquery.min.js?1617196794></script><script src=/mazela-man-web/js/jquery.sticky.js?1617196794></script><script src=/mazela-man-web/js/featherlight.min.js?1617196794></script><script src=/mazela-man-web/js/highlight.pack.js?1617196794></script><script>hljs.initHighlightingOnLoad()</script><script src=/mazela-man-web/js/modernizr.custom-3.6.0.js?1617196794></script><script src=/mazela-man-web/js/learn.js?1617196794></script><script src=/mazela-man-web/js/hugo-learn.js?1617196794></script><script src=/mazela-man-web/mermaid/mermaid.js?1617196794></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>